<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="js/extend.js"></script>
<script type="text/javascript" src="censorlist.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#nameButton').on('click', nameCheck);
        $('#nameInput').on('keypress', function (e) {
            e.keyCode == 13 ? nameCheck() : null;
        });
    });

    var nameCheck = function () {
        var censored = false;
        var name = $('#nameInput').val();
        var censoredList = [];
        
        for (var i = 0; i < censorList.length; i++) {
            var foundOccurrence;
            do {
                foundOccurrence = false;
                var itemIndex = name.toLowerCase().indexOf(censorList[i].toLowerCase())
                if (itemIndex > -1) {
                    foundOccurrence = true;
                    for (var x = itemIndex; x < itemIndex + censorList[i].length; x++) {
                        name = name.replaceChar('*', x);
                    }
                    
                    censored = true;
                    censoredList.push(censorList[i]);
                }
            } while (foundOccurrence);
        }

        if (censored) {
            $('#outputMessage').css('color', 'red');
            $('#outputMessage').html('Your name is censored:');
            $('#outputName').html(name);
            $('#outputReason').html('For the following words: <br />' + censoredList.join('<br />'));
        } else {
            $('#outputMessage').css('color', 'green');
            $('#outputMessage').html('Your name is not censored:');
            $('#outputName').html(name);
            $('#outputReason').html('');
        }
    };
</script>

<html>
<head>
    <title>Name Check</title>
    <link rel="stylesheet" type="text/css" media="screen" href="css/stylesheet.css">
</head>
<body>
    <div id="header_wrap" class="outer">
        <header class="inner">
            <a id="forkme_banner" href="https://github.com/omgftw/DarkSouls2CensorCheck/tree/gh-pages">View on GitHub</a>

            <h1 id="project_title">Dark Souls 2 Name Censor Checker</h1>
            <h2 id="project_tagline"></h2>

        </header>
    </div>

    <div id="main_content_wrap" class="outer">
        <section id="main_content" class="inner" style="text-align: center">
            <input type="text" id="nameInput" maxlength="14"/>
            <button type="button" id="nameButton" style="border-radius: 3px;">Check</button>
            <div id="outputContent">
                <p id="outputMessage"></p>
                <p id="outputName"></p>
                <p id="outputReason"></p>
            </div>
        </section>
    </div>
</body>
</html>